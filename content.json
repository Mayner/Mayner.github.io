[{"title":"win10安装nvm填坑总结","date":"2018-04-20T10:11:27.000Z","path":"2018/04/20/win10安装nvm填坑总结/","text":"前言一直都在用nvm来切换node的版本，使用也都正常。最近在尝试入坑快应用的时候，在命令行输入 npm install -g hap-toolkit 安装之后查看版本号看是否安装成功，输入 hap -V ，结果显示： &#39;hap&#39; 不是内部或外部命令，也不是可运行的程序或批处理文件。然后进到项目根目录下运行 hap -V ，结果正常，想着应该是环境变量没配好，就试了一下安装别的脚手架，都有一样的问题，捣鼓了一番环境变量，还是不行。最后决定卸载nvm重新安装，于是开始了nvm的安装填坑之路。此文目的在于记录自己安装nvm的过程和遇到的问题以及解决办法。 nvm的作用nvm 是 node 的版本管理工具，它能帮助你快速安装并切换使用node的版本，为什么要切换node的版本？因为各种工具使用的 node 版本可能不一致，就会出现一些奇怪的问题。比如：快应用，就需要安装6.0以上版本，官方推荐使用的是 node v6.11.3，还强调不要使用8.0.*版本，因为这个版本内部 ZipStream 实现与 node-archive 包不兼容，会引起报错。也就是说，我们在平常工作中经常会碰到使用不同 node 版本，而每次切换版本挺麻烦还耗时，你要先卸载掉当前已经安装使用的 node 版本，然后重新下载安装需要的那个版本，这个过程是繁琐的；而且为了某些功能而去反复卸载下载安装不同的 node 版本，这是非常不划算的，nvm 就是专门解决这个问题的工具。 nvm的下载安装1.下载地址：nvm的下载地址（如果你已经单独安装了node，建议先卸载）。2.我选择的是1.1.5版本里 nvm-setup.zip 这个安装包。3.解压后双击安装，此处注意以下两点： 在选择安装目录这一步的时候我选的是默认路径，记住这一步骤的路径，因为之后使用nvm安装的node版本都会存放在该目录下，安装完后里面有个settings.txt文件，之后配置环境变量的时候有用。 接着到 Set Node.js Symlink 这一步，这里的目录是之后 nvm use 你使用的那个node版本程序的存放目录。我这里选的是 C:\\dev\\nodejs 。其他步骤都按默认的走，一路next直到安装完成。 4.打开命令行窗口123nvm v // 查看nvm版本 1.1.5nvm install latest // 下载node最新版 v9.11.1nvm install 8.11.1 // 下载制定版本 下载对应的node版本后会在nvm的安装目录下生成对应的版本文件夹（即上述所说的 C:\\Users\\ab052479\\AppData\\Roaming\\nvm），在命令行输入 nvm list 可以看到下载的node版本及当前使用的版本是 6.11.3 ，再输入 nvm use 8.11.1 切换使用node v8.11.1版本，此时再 nvm list 可以看到当前使用的版本已经变成 8.11.1 。这时就会在 C:\\dev 的目录出现个 nodejs 文件夹的快捷方式。 npm的全局安装路径配置执行命令: npm config set prefix &quot;C:\\dev\\node\\npm-global&quot; C:\\Users\\你的用户名\\ 会生成个 .npmrc 文件，内容如下：prefix=C:\\dev\\node\\npm-global这时候再去安装全局的东西,比如 npm install -g hap-toolkit ，所有全局的包都会出现在 C:\\dev\\node\\npm-global\\node_modules 目录中。 环境变量的配置打开环境变量配置窗口的路径：此电脑右键 → 属性 → 高级系统设置 → 环境变量。 用户变量NVM_HOME 的值设成 C:\\dev\\node\\npm-global ， NVM_SYMLINK 的值设成 C:\\dev\\nodejs, path 需要有 %NVM_HOME% 和 %NVM_SYMLINK% 。 系统变量NVM_HOME 的值设成 C:\\dev\\node\\npm-global ， NVM_SYMLINK 的值设成 C:\\dev\\nodejs, path 需要有 %NVM_HOME% 和 %NVM_SYMLINK% ，在 path的最后再配上一条 C:\\Users\\ab052479\\AppData\\Roaming\\nvm ，这样就可以全局使用nvm了。然而，当我在D盘某个项目里打开命令行使用nvm操作时，报错了：ERROR open C:\\dev\\node\\npm-global\\settings.txt: The system cannot find the file specified.不过别慌，人家已经给你报出是什么原因了：该路径下找不到 settings.txt 这个文件，这时，你只需要去nvm的安装路径 C:\\Users\\ab052479\\AppData\\Roaming\\nvm 下把 settings.txt 文件复制到 C:\\dev\\node\\npm-global 就行了（记得关掉命令行窗口重新开一个再试）。","tags":[{"name":"nvm","slug":"nvm","permalink":"https://mayner.github.io/tags/nvm/"},{"name":"win10","slug":"win10","permalink":"https://mayner.github.io/tags/win10/"},{"name":"node.js","slug":"node-js","permalink":"https://mayner.github.io/tags/node-js/"}]}]